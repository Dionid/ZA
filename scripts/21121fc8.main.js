"use strict";$(document).ready(function(){function mainAnimation(){function a(a){var b=setInterval(function(){a.volume+=.005,a.volume>.9&&window.clearTimeout(b)},100)}maintl.to($("#about"),.8,{opacity:1,ease:Circ.easeOut}).to([$("#line4"),$("#line7")],.5,{width:"66.9%",ease:Circ.easeIn}).to([$("#line1"),$("#line10")],.5,{height:"33.3%",ease:Circ.easeIn}).to([$("#line2"),$("#line8")],.5,{width:"66.9%",ease:Circ.easeIn}),mainsectl.to([$("#line6"),$("#line3")],.5,{height:"66.7%",ease:Circ.easeIn,delay:.8}).to([$("#line9"),$("#line12")],.5,{width:"33.3%",ease:Circ.easeIn}).to([$("#line5"),$("#line11")],.5,{height:"66.7%",ease:Circ.easeIn}).to($(".video"),.5,{display:"block",opacity:1}),TweenMax.to($("#menuicon"),.1,{top:"100%"}),$(".video").hover(function(){var b=$(this).attr("data-id"),c=$(this).attr("data-width"),d=($(this).attr("data-height"),document.getElementById(b));null!==d&&(d.muted=!1,d.volume=0,a(d),TweenMax.to($(".disc",this),.5,{height:"90%",width:c,ease:Circ.easeOut}))},function(){TweenMax.to($(".disc",this),.5,{height:0,ease:Circ.easeOut}),TweenMax.to($(".disc",this),.5,{width:0,ease:Circ.easeOut});var a=$(this).attr("data-id"),b=document.getElementById(a);null!==b&&(window.clearTimeout(),b.muted=!0)})}function pauseHide(a){$(".pause#"+a).hide()}function playHide(a){$(".play#"+a).hide()}function playAnim(a,b,c){var c=c;$(".play#"+c).show(),a&&TweenMax.to($(".pauseBut#"+c),.5,{height:0,onComplete:pauseHide,onCompleteParams:[c]}),TweenMax.to(b,.5,{height:"133px"})}function pauseAnim(a,b,c){var c=c;$(".pause#"+c).show(),a&&TweenMax.to($(".playBut#"+c),.5,{height:0,onComplete:playHide,onCompleteParams:[c]}),TweenMax.to(b,.5,{height:"133px"})}function samplesAnimation(){function a(){$(".audioblock").css("pointer-events","auto"),$(".audioLines").css("opacity",1)}samplestl.to($(".blocks"),1.2,{transform:"translateX(0)",ease:Circ.easeOut}),samplessectl.to($(".backgraudio"),1.4,{rotationZ:360}).to(".backgraudio",.5,{width:"100%",height:"100%",ease:Circ.easeOut,onComplete:a}).to("#blackwriter",.4,{width:"33.3%",ease:Circ.easeOut}).to(["#works","#examples"],1e-5,{opacity:1}).to("#blackwriter",1,{height:0}).to("#blackwriter",.4,{width:"0%",ease:Circ.easeOut}),$(".audioblock").hover(function(){$(".play",this).parent().hasClass("playing")||playAnim(!1,$(".playBut",this));var a=$(this).data("bg");TweenMax.to($(a),.3,{opacity:1}),TweenMax.to($(".backgraudio"),.3,{opacity:0}),TweenMax.to($(".progress",this),.3,{opacity:1})},function(){var a=$(this).data("bg");TweenMax.to($(a),.3,{opacity:0}),TweenMax.to($(".playBut",this),.3,{height:0,ease:Circ.easeOut}),TweenMax.to($(".backgraudio"),.3,{opacity:1}),TweenMax.to($(".progress",this),.3,{opacity:0})})}function costAnimation(){function a(){$(".costImg").css("pointer-events","auto")}function b(){var a=['<h3 class="innerText">STUDIO RECORDING</h3><p>from 200$</p>','<h3 class="innerText">MUSICAL INSTRUMENT</h3><p>from 100$ p/h</p>','<h3 class="innerText">VIDEOCLIP RECORDING</h3><p>from 1500$</p>','<h3 class="innerText">BULDING SONG</h3><p>from 1000$</p>','<h3 class="innerText">DISKS MASTERING</h3><p>from 10$</p>','<h3 class="innerText">AUDIO MASTERING</h3><p>from 300$ p/h</p>'];$(".costImg").hover(function(){if(!$(this).parent().hasClass("central")){var b=parseInt($(this).parent().attr("id").match(/(\d+)$/)[0],10),d=$(this).parent().children(),e=c[b-1],f=a[b-1],g=$(this).data("id");TweenMax.to([d,$(".centralCost > *")],.3,{backgroundColor:e}),TweenMax.to($("#backgrCost"),.4,{opacity:1}),TweenMax.to($(g),.4,{opacity:1}),$("#costText").append(f),TweenMax.to($("#costName"),.3,{left:"100%",ease:Circ.easeOut}),TweenMax.to($("#costText > h3, #costText > p"),.3,{left:"0",color:"#fff",ease:Circ.easeOut}),TweenMax.to($("path, rect",this),.3,{fill:"#fff"})}},function(){var a=$(this).data("id");TweenMax.to($("#costText > h3, #costText > p"),.1,{left:"-100%",ease:Circ.easeOut}),$("#costText > h3, #costText > p").remove(),TweenMax.to($(a),.4,{opacity:0}),TweenMax.to([$(".corner1, .corner2, .costImg, .centralCost > *")],.3,{backgroundColor:"#fff"}),TweenMax.to($("#backgrCost"),.3,{opacity:0}),TweenMax.to($("#costText > *"),.3,{color:"#000"}),TweenMax.to($("#costName"),.3,{left:"0"}),TweenMax.to($("path, rect",this),.3,{fill:"#000"})})}TweenMax.to($(".costLine"),.3,{opacity:1}),coststl.to($(".firstLine"),.3,{height:"101%"}).to($(".secondLine"),.3,{height:"101%"}).to($(".thirdLine"),.3,{height:"101%"}).to($(".costLine"),.3,{opacity:0}),costssectl.to($(".fourthLine"),.3,{height:"101%"}).to($(".fithLine"),.3,{height:"101%"}).to($(".sixthLine"),.3,{height:"101%"}).to($(".corner1, .corner2, .costImg, .main"),.3,{opacity:1,onComplete:a});var c=[];$('div[id^="six"]').each(function(){var a=$(this);c.push(a.css("background-color"))}),$(".six").css("background-color","transparent"),$(".corner1, .corner2, .costImg, .centralCost > *").css("background-color","#fff"),b()}function scrolll(a,b,c){function d(){$("#s2").offset().top-100,$("#s1").offset().top-10,$("#s3").offset().top-100,$(window).scrollTop();"samples"==c?(samplestl.play(),samplessectl.play(),$(".audioblock").hasClass("playing")&&setTimeout(function(){var a=$(".playing").attr("id");$(".pause#"+a).show(),TweenMax.to($(".pauseBut#"+a),.5,{height:133})},2e3)):"main"==c?(maintl.play(),mainsectl.play()):"costs"==c&&(coststl.play(),costssectl.play())}"costs"===a&&$(".costImg").css("pointer-events","none"),TweenMax.to($("html,body"),.01,{scrollTop:b,onComplete:d})}function animation(){var a=$("#menuicon").css("height"),b=$(".slot").css("padding-top"),c=$("nav").css("height"),d=parseInt(c);$("nav").css("transform","translateY(-"+c+")"),$("#menuicon").css("top",c),$("nav").hover(function(){$("#menuicon").css("height",0),$("nav").css("transform","translateY(0)"),$(".slot").css("padding-top",d)},function(){$("nav").css("transform","translateY(-"+c+")"),$("#menuicon").css("height",a),$(".slot").css("padding-top",b)})}function audioCorretion(){var a=parseInt($(".slot").css("height")),b=a-28;$(".col.left").css("height",b)}function player(a,b,c,d,e){$(a).each(function(){var a=$(this).attr("id");$("*",this).each(function(){var b=$(this).attr("id");$(this).attr("id")?$(this).attr("id",a+" "+b):$(this).attr("id",a)})}),d&&$(a).mouseenter(function(){$(this).addClass(d)}).mouseleave(function(){$(this).removeClass(d)}),$(".play").click(function(){if($(".play").parent().hasClass("playing")){var d=$(".playing"),f=d.attr("id");document.getElementById(f+" player").pause(),c&&playAnim(!0,$(".pauseBut#"+g),f),b&&($(".pause#"+f).hide(),$(".play#"+f).show()),d.removeClass("playing")}var g=$(this).attr("id"),h=document.getElementById(g+" player");h.play(),b&&($(this).hide(),$(".pause#"+g).show()),c&&pauseAnim(!0,$(".pauseBut#"+g),g),$(this).parent().addClass("playing");var i=document.getElementById(g+" player"),j=document.getElementById(g+" progress"),k=document.getElementById(g+" loading"),l=document.getElementById(g+" buffered"),m=window.getComputedStyle(j),n=m.getPropertyValue("width"),o=window.getComputedStyle(j),p=o.getPropertyValue("height");j.style.width=n,j.style.height=k.style.height=l.style.height=p,i.addEventListener("timeupdate",function(){var a=i.currentTime/i.duration*parseInt(j.style.width);k.style.width=a+"px"},!1),i.addEventListener("progress",function(){var a=i.seekable.end(0)/i.duration*parseInt(j.style.width);l.style.width=a+"px"},!1),e&&$(a+"#"+g).addClass(e);{var q=$(this).attr("id"),r=document.getElementById(q+" player");document.getElementById(q+" audioSlider"),r.volume,$(".pause").click(function(){$(this).data("click",!0);var d=$(this).attr("id");document.getElementById(d+" player").pause(),c&&playAnim(!0,$(".playBut#"+d),d),$(".play#"+d).parent().removeClass("playing"),b&&($(this).hide(),$(".play#"+d).show(),$(".play#"+d).parent().removeClass("playing"),e&&$(this).data("click")&&$(a+"#"+d).removeClass(e))})}})}function activateOnTouch(a,b,c){var d=[],e=[];!function(a,b){$(a).each(function(a,c){d[a]=$(c).attr("id"),e[a]=$("#"+d[a]).offset().top-parseInt($(b).css("height"))})}(a,c),$(window).scroll(function(){for(var a=$(window).scrollTop(),c=0;c<e.length;c++){var f=c+1;a>=e[c]&&a<e[f]?($("."+b).removeClass(b),$('a[href="#'+d[c]+'"]').addClass(b)):a>=e[e.length-1]&&($("."+b).removeClass(b),$('a[href="#'+d[d.length-1]+'"]').addClass(b))}})}$("body").on("mousewheel",function(a){a.preventDefault()}),$(window).bind("load",function(){var a=new TimelineMax,b=new TimelineMax,c=new TimelineMax,d=new TimelineMax;TweenMax.to($("#menuicon"),.1,{top:"-100%"}),$("#logoload").removeClass("animated"),$("#loadphrase").fadeOut(500),$("#logoload").animate({opacity:1},100,"easeInExpo",function(){$("#partsblock").show(),$(this).hide(),a.to($("#logoR"),.9,{left:"200px",ease:Circ.easeOut}).to($("#logoR"),.9,{left:"-3px",ease:Circ.easeIn}),b.to($("#logoL"),.9,{left:"-200px",ease:Circ.easeOut}).to($("#logoL"),.9,{left:"2px",ease:Circ.easeIn}),c.to($("#logoB"),1,{top:"200px",left:"-3px",width:"255px",height:"295px",ease:Circ.easeOut}).to($("#logoB"),1,{top:"-25px",ease:Circ.easeIn}),d.to($("#logoT"),1,{top:"-200px",left:"2px",width:"258px",height:"295px",ease:Circ.easeOut}).to($("#logoT"),1,{top:"2px",ease:Circ.easeIn}).to($("#blackcube"),.5,{width:"100%",height:"220%"}).to($("#loading"),.1,{display:"none",onComplete:mainAnimation}),$(window).scrollTop(0)})});var maintl=new TimelineMax,mainsectl=new TimelineMax,samplestl=new TimelineMax,samplessectl=new TimelineMax,audioHo=new TimelineMax,discHover=new TimelineMax,coststl=new TimelineMax,costssectl=new TimelineMax;samplesAnimation(),samplestl.reverse(),samplessectl.reverse(),costAnimation(),coststl.reverse(),costssectl.reverse(),$('a[class*="slotLinks"]').click(function(event){event.preventDefault();var id=$('a[class*="active"]').attr("id"),nextId=$(this).attr("id"),firstTL=eval(id+"tl"),secTL=eval(id+"sectl"),distance=$(this).attr("href"),topOff=$(distance).offset().top;if(id!==nextId)if("main"===id)setTimeout(function(){firstTL.reverse()},500),secTL.reverse(),secTL.eventCallback("onReverseComplete",scrolll,[id,topOff,nextId]);else if("samples"===id){$(".audioblock").css("pointer-events","none");var id=$(".playing").attr("id");try{TweenMax.to($(".pauseBut#"+id),.5,{height:0,onComplete:pauseHide})}catch(e){console.log(e)}setTimeout(function(){$(".audioLines").css("opacity",0),firstTL.reverse()},2500),secTL.reverse(),secTL.eventCallback("onReverseComplete",scrolll,[id,topOff,nextId])}else"costs"===id&&($("#costText > h3, #costText > p").remove(),firstTL.reverse(),secTL.reverse(),secTL.eventCallback("onReverseComplete",scrolll,[id,topOff,nextId]))}),$("#contacts").click(function(){$(this).addClass("activeCont"),TweenMax.to($("#contactsSect"),.5,{bottom:0,ease:Circ.easeOut}),$("#darkScreen").fadeIn(500)}),$("#closeCont").click(function(){TweenMax.to($("#contactsSect"),.5,{bottom:"-100%",ease:Circ.easeIn}),$("#darkScreen").fadeOut(500),$("#contacts").removeClass("activeCont")}),animation(),audioCorretion(),player(".audioblock",!1,!0,!1),activateOnTouch(".slot","active","nav")});